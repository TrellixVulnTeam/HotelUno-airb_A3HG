{"ast":null,"code":"var _jsxFileName = \"/Users/decagon/Desktop/NODE007/REACT/Hoteluno-airb/Frontend/src/Components/HostForm/HostForm.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Form, Col, Button } from \"react-bootstrap\";\nimport AuthContext from \"../../store/AuthContext\";\nimport axios from \"axios\";\nimport styles from \"./HostForm.module.css\";\nimport Modal from \"../Modal/Modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst HostForm = props => {\n  _s();\n\n  const [files, setFiles] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [desc, setDesc] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [state, setState] = useState(\"\");\n  const [features, setFeatures] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [response, setResponse] = useState(\"\");\n  const [show, setShow] = useState(true);\n  const ctx = useContext(AuthContext);\n  const history = useHistory();\n\n  const handleFileUpload = e => {\n    setFiles(e.target.files);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const formData = new FormData(); // formData.append(\"files\", files)\n\n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"files\", files[i]);\n    }\n\n    formData.append(\"title\", title);\n    formData.append(\"description\", desc);\n    formData.append(\"features\", features);\n    formData.append(\"location\", `${city}, ${state}`);\n    formData.append(\"price\", price);\n    formData.append(\"hostid\", ctx.userData.email);\n    uploadListing(formData);\n    console.log(\"i was clicked\", formData);\n  };\n\n  const handleTitleChange = e => {\n    setTitle(e.target.value);\n  };\n\n  const handleDescChange = e => {\n    setDesc(e.target.value);\n  };\n\n  const handleFeaturesChange = e => {\n    setFeatures(e.target.value);\n  };\n\n  const handleCityChange = e => {\n    setCity(e.target.value);\n  };\n\n  const handleStateChange = e => {\n    setState(e.target.value);\n  };\n\n  const handlePriceChange = e => {\n    setPrice(e.target.value);\n  };\n\n  const uploadListing = async body => {\n    setLoading(true);\n\n    try {\n      const {\n        data\n      } = await axios.post(\"https://fierce-plains-40745.herokuapp.com/api/host/listing\", body, {\n        headers: {\n          'Content-Type': \"multipart/form-data\"\n        }\n      });\n      console.log('I posted!', data);\n      const res = await ctx.guestBecomeHost();\n\n      if (res === \"Successful\") {\n        setResponse(\"Upload Successful\");\n        setTimeout(() => history.push(\"/home\"), 1000);\n      } else setResponse(\"Upload failed\");\n\n      return data;\n    } catch (e) {\n      console.log(e, e.message);\n    }\n\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.Main,\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        title: `Hi, ${ctx.userData.firstName}`,\n        show: show,\n        toggle: () => setShow(false),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Hosting is fun, but getting amazing ROI while at it is even more fun. Hundreds of guest can't wait to see your apartment. \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"dark\",\n            block: true,\n            onClick: () => setShow(false),\n            children: \"LET'S GO!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        encType: \"multipart/form-data\",\n        className: styles.Form,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formGridEmail\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"Type of apartment you are hosting\",\n            value: title,\n            onChange: handleTitleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formGridPassword\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"textarea\",\n            as: \"textarea\",\n            placeholder: \"Make the guests know what your listing is like\",\n            rows: 4,\n            value: desc,\n            onChange: handleDescChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formGridEmail\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Features\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"textarea\",\n            placeholder: \"e.g King-sized bed for 2, free WiFi, etc...\",\n            as: \"textarea\",\n            rows: 3,\n            value: features,\n            onChange: handleFeaturesChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"formGridPassword1\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"City\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"e.g Ikeja\",\n              value: city,\n              onChange: handleCityChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            as: Col,\n            controlId: \"formGridPassword1\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"State\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"e.g Lagos state\",\n              type: \"text\",\n              value: state,\n              onChange: handleStateChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formGridPassword1\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            value: price,\n            placeholder: \"e.g N20,000/night\",\n            onChange: handlePriceChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          children: /*#__PURE__*/_jsxDEV(Form.File, {\n            onChange: handleFileUpload,\n            id: \"exampleFormControlFile1\",\n            label: \"Upload Images\",\n            name: \"image\",\n            multiple: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          disabled: title === \"\" || desc === \"\" || price === \"\" || state === \"\" || files.length === 0,\n          onClick: handleSubmit,\n          block: true,\n          variant: \"dark\",\n          children: loading ? \"Uploading...\" : \"Upload Listing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), response === \"Upload Successful\" ? /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            color: \"green\"\n          },\n          children: response\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 57\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            color: \"red\"\n          },\n          children: response\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 106\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(HostForm, \"ty1LMFH/aEBRZgZqsZyXDCAIRxg=\", false, function () {\n  return [useHistory];\n});\n\n_c = HostForm;\nexport default HostForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"HostForm\");","map":{"version":3,"sources":["/Users/decagon/Desktop/NODE007/REACT/Hoteluno-airb/Frontend/src/Components/HostForm/HostForm.tsx"],"names":["useState","useContext","useHistory","Form","Col","Button","AuthContext","axios","styles","Modal","HostForm","props","files","setFiles","title","setTitle","desc","setDesc","city","setCity","state","setState","features","setFeatures","price","setPrice","loading","setLoading","response","setResponse","show","setShow","ctx","history","handleFileUpload","e","target","handleSubmit","preventDefault","formData","FormData","i","length","append","userData","email","uploadListing","console","log","handleTitleChange","value","handleDescChange","handleFeaturesChange","handleCityChange","handleStateChange","handlePriceChange","body","data","post","headers","res","guestBecomeHost","setTimeout","push","message","Main","firstName","color"],"mappings":"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","sourcesContent":["import { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Form, Col, Button } from \"react-bootstrap\";\nimport AuthContext from \"../../store/AuthContext\"\nimport axios from \"axios\";\nimport styles from \"./HostForm.module.css\";\nimport Modal from \"../Modal/Modal\"\n\ninterface Props {\n\n}\n\nconst HostForm = (props: Props) => {\n    const [files, setFiles] = useState(\"\")\n    const [title, setTitle] = useState(\"\")\n    const [desc, setDesc] = useState(\"\")\n    const [city, setCity] = useState(\"\")\n    const [state, setState] = useState(\"\")\n    const [features, setFeatures] = useState(\"\")\n    const [price, setPrice] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [response, setResponse] = useState(\"\");\n    const [show, setShow] = useState(true)\n\n    const ctx = useContext(AuthContext);\n    const history = useHistory();\n\n    const handleFileUpload = (e) => {\n        setFiles(e.target.files);\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        const formData = new FormData();\n        // formData.append(\"files\", files)\n        for (let i = 0; i < files.length; i++) {\n            formData.append(\"files\", files[i])\n        }\n        formData.append(\"title\", title);\n        formData.append(\"description\", desc);\n        formData.append(\"features\", features);\n        formData.append(\"location\", `${city}, ${state}`);\n        formData.append(\"price\", price);\n        formData.append(\"hostid\", ctx.userData.email);\n        uploadListing(formData);\n        console.log(\"i was clicked\", formData)\n\n    }\n\n    const handleTitleChange = (e) => {\n        setTitle(e.target.value)\n    }\n    const handleDescChange = (e) => {\n        setDesc(e.target.value)\n    }\n    const handleFeaturesChange = (e) => {\n        setFeatures(e.target.value)\n    }\n    const handleCityChange = (e) => {\n        setCity(e.target.value)\n    }\n    const handleStateChange = (e) => {\n        setState(e.target.value)\n    }\n    const handlePriceChange = (e) => {\n        setPrice(e.target.value)\n    }\n\n\n\n\n    const uploadListing = async (body) => {\n        setLoading(true)\n        try {\n            const { data } = await axios.post(\"https://fierce-plains-40745.herokuapp.com/api/host/listing\", body, { headers: { 'Content-Type': \"multipart/form-data\" } });\n            console.log('I posted!', data);\n            const res = await ctx.guestBecomeHost()\n            if (res === \"Successful\") {\n                setResponse(\"Upload Successful\")\n                setTimeout(() => history.push(\"/home\"), 1000)\n            }\n            else setResponse(\"Upload failed\")\n            return data;\n        }\n        catch (e) {\n            console.log(e, e.message)\n        }\n        setLoading(false)\n\n    }\n    return (\n        <>\n            <div className={styles.Main}>\n                <Modal title={`Hi, ${ctx.userData.firstName}`} show={show} toggle={() => setShow(false)}>\n                    <div>\n                        <h3>Hosting is fun, but getting amazing ROI while at it is even more fun.\n                            Hundreds of guest can't wait to see your apartment. </h3>\n                        <Button variant=\"dark\" block onClick={() => setShow(false)} >LET'S GO!</Button>\n                    </div>\n\n                </Modal>\n                {/* <div className={styles.side}> <h1>Put your room up for listing</h1></div> */}\n                {/* <div className={styles.hero}>\n                    <h3>There's always a slot for your property with us.</h3>\n                    <img src={img} alt=\"\" />\n                </div> */}\n                <Form encType=\"multipart/form-data\" className={styles.Form}>\n                    <Form.Group controlId=\"formGridEmail\">\n                        <Form.Label>Title</Form.Label>\n                        <Form.Control type=\"text\" placeholder=\"Type of apartment you are hosting\" value={title} onChange={handleTitleChange} />\n                    </Form.Group>\n\n                    <Form.Group controlId=\"formGridPassword\">\n                        <Form.Label>Description</Form.Label>\n                        <Form.Control type=\"textarea\" as=\"textarea\" placeholder=\"Make the guests know what your listing is like\" rows={4} value={desc} onChange={handleDescChange} />\n                    </Form.Group>\n\n\n                    <Form.Group controlId=\"formGridEmail\">\n                        <Form.Label>Features</Form.Label>\n                        <Form.Control type=\"textarea\" placeholder=\"e.g King-sized bed for 2, free WiFi, etc...\" as=\"textarea\" rows={3} value={features} onChange={handleFeaturesChange} />\n                    </Form.Group>\n                    <Form.Row>\n                        <Form.Group as={Col} controlId=\"formGridPassword1\">\n                            <Form.Label>City</Form.Label>\n                            <Form.Control type=\"text\" placeholder=\"e.g Ikeja\" value={city} onChange={handleCityChange} />\n                        </Form.Group>\n                        <Form.Group as={Col} controlId=\"formGridPassword1\">\n                            <Form.Label>State</Form.Label>\n                            <Form.Control placeholder=\"e.g Lagos state\" type=\"text\" value={state} onChange={handleStateChange} />\n                        </Form.Group>\n\n                    </Form.Row>\n\n                    <Form.Group controlId=\"formGridPassword1\">\n                        <Form.Label>Price</Form.Label>\n                        <Form.Control type=\"text\" value={price} placeholder=\"e.g N20,000/night\" onChange={handlePriceChange} />\n                    </Form.Group>\n                    <Form.Group >\n                        <Form.File onChange={handleFileUpload} id=\"exampleFormControlFile1\" label=\"Upload Images\" name=\"image\" multiple />\n                    </Form.Group>\n\n                    <Button disabled={title === \"\" || desc === \"\" || price === \"\" || state === \"\" || files.length === 0} onClick={handleSubmit} block variant=\"dark\">\n                        {loading ? \"Uploading...\" : \"Upload Listing\"}\n                    </Button>\n                    {response === \"Upload Successful\" ? <h4 style={{ color: \"green\" }}>{response}</h4> : <h4 style={{ color: \"red\" }}>{response}</h4>}\n                </Form>\n            </div>\n        </>\n    )\n}\n\nexport default HostForm\n"]},"metadata":{},"sourceType":"module"}