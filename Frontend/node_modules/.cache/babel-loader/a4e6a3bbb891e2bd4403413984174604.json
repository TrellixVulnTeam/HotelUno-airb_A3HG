{"ast":null,"code":"var _jsxFileName = \"/Users/decagon/Desktop/NODE007/REACT/Hoteluno-airb/Frontend/src/Components/RoomDetails/RoomDetails.tsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { FcLike, FcLikePlaceholder } from \"react-icons/fc\";\nimport styles from \"./RoomDetails.module.css\";\nimport { Carousel, Form, Button } from \"react-bootstrap\";\nimport AuthContext from \"../../store/AuthContext\";\nimport { useParams } from \"react-router-dom\";\nimport Modal from \"../Modal/Modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RoomDetails = props => {\n  _s();\n\n  const ctx = useContext(AuthContext);\n  const [data, setData] = useState({});\n  const [state, setState] = useState(false);\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [showModal, setShowModal] = useState(false);\n\n  const handleFirstNameChange = e => {\n    setFirstName(e.target.value);\n  };\n\n  const handleLastNameChange = e => {\n    setLastName(e.target.value);\n  };\n\n  const handlePhoneChange = e => {\n    setPhone(e.target.value);\n  };\n\n  const handleSubmit = async e => {\n    if (!ctx.loggedIn) {\n      // setShow(true);\n      setResponse(\"You have to be logged in!\");\n      return;\n    }\n\n    e.preventDefault();\n    const body = {\n      name: `${firstName} ${lastName}`,\n      phone,\n      hostid: data.hostid,\n      roomId: data.roomId,\n      userEmail: ctx.userData.email\n    };\n    const res = await ctx.submitBooking(body);\n    if (res && res.status === \"Successful\") setShowModal(true);else setResponse(res.message);\n    setTimeout(() => setResponse(\"\"), 2000);\n  };\n\n  const iconClick = id => {\n    setState(!state);\n    ctx.handleFavorites(id);\n  };\n\n  const {\n    roomId\n  } = useParams();\n\n  const toggle = () => {\n    setShowModal(!showModal);\n    window.location.reload();\n    return false;\n  };\n\n  console.log(roomId, ctx.userData);\n  useEffect(() => {\n    const room = ctx.roomsData.find(room => +room.roomId === +roomId);\n    if (room) setData(room);\n    console.log(roomId, \"data is\", data);\n  }, [ctx.roomsData, data, roomId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.Main,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.Content,\n      children: [/*#__PURE__*/_jsxDEV(Carousel, {\n        interval: 2000,\n        indicators: false,\n        children: data.imageUrl && data.imageUrl.length > 0 && data.imageUrl.map(url => /*#__PURE__*/_jsxDEV(Carousel.Item, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"d-block w-100\",\n            src: url,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 92\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [data.title, \" \", ctx.favorites && ctx.favorites.includes(data.roomId) ? /*#__PURE__*/_jsxDEV(FcLike, {\n          onClick: () => iconClick(data.roomId)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 90\n        }, this) : /*#__PURE__*/_jsxDEV(FcLikePlaceholder, {\n          onClick: () => iconClick(data.roomId),\n          style: {\n            \"fontSize\": \"1.5rem\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 142\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.info,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: data.location\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: data.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), data.booked ? /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              \"color\": \"red\"\n            },\n            children: \"Not available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 40\n          }, this) : \"Available\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.desc,\n        children: data.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.fts,\n        children: data.features\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.Form,\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Let your host meet you\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        noValidate: true,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"exampleForm.ControlInput1\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            required: true,\n            type: \"text\",\n            onChange: handleFirstNameChange,\n            value: firstName,\n            placeholder: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"exampleForm.ControlInput1\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            required: true,\n            type: \"text\",\n            onChange: handleLastNameChange,\n            value: lastName,\n            placeholder: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"exampleForm.ControlInput1\",\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            onChange: handlePhoneChange,\n            value: phone,\n            required: true,\n            type: \"tel\",\n            placeholder: \"Phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleSubmit,\n          disabled: data.booked || firstName === \"\" || lastName === \"\" || phone === \"\",\n          type: \"submit\",\n          variant: \"dark\",\n          block: true,\n          children: ctx.loading ? \"Booking...\" : data.booked ? \"Booked\" : \"Book Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), response !== undefined && /*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            \"textAlign\": \"center\",\n            \"color\": \"red\"\n          },\n          children: response\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          title: \"Booking Successful\",\n          toggle: toggle,\n          show: showModal,\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            style: {\n              \"letterSpacing\": \"1px\",\n              \"textAlign\": \"center\",\n              \"lineHeight\": \"1.7\"\n            },\n            children: [data.title, \" has been booked successfully! Your host will reach out to you shortly\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n\n_s(RoomDetails, \"CMIwlpDM7+iFwXG95vJPkjX2lnM=\", false, function () {\n  return [useParams];\n});\n\n_c = RoomDetails;\nexport default RoomDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"RoomDetails\");","map":{"version":3,"sources":["/Users/decagon/Desktop/NODE007/REACT/Hoteluno-airb/Frontend/src/Components/RoomDetails/RoomDetails.tsx"],"names":["useContext","useEffect","useState","FcLike","FcLikePlaceholder","styles","Carousel","Form","Button","AuthContext","useParams","Modal","RoomDetails","props","ctx","data","setData","state","setState","firstName","setFirstName","lastName","setLastName","phone","setPhone","response","setResponse","showModal","setShowModal","handleFirstNameChange","e","target","value","handleLastNameChange","handlePhoneChange","handleSubmit","loggedIn","preventDefault","body","name","hostid","roomId","userEmail","userData","email","res","submitBooking","status","message","setTimeout","iconClick","id","handleFavorites","toggle","window","location","reload","console","log","room","roomsData","find","Main","Content","imageUrl","length","map","url","title","favorites","includes","info","price","booked","desc","description","fts","features","loading","undefined"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\"\nimport { FcLike, FcLikePlaceholder } from \"react-icons/fc\"\nimport styles from \"./RoomDetails.module.css\"\nimport { Carousel, Form, Button } from \"react-bootstrap\"\nimport AuthContext from \"../../store/AuthContext\"\nimport { useParams } from \"react-router-dom\"\nimport { RoomData } from \"../../store/AuthContext\";\nimport Modal from \"../Modal/Modal\"\n\n\ninterface Props {\n    title?: \"\",\n    description?: \"\",\n    price?: \"\",\n    location?: \"\",\n    history?: \"\";\n}\n\nconst RoomDetails = (props: Props) => {\n    const ctx = useContext(AuthContext);\n\n    const [data, setData] = useState({} as RoomData);\n    const [state, setState] = useState(false);\n    const [firstName, setFirstName] = useState(\"\")\n    const [lastName, setLastName] = useState(\"\")\n    const [phone, setPhone] = useState(\"\")\n    const [response, setResponse] = useState(\"\" as any);\n    const [showModal, setShowModal] = useState(false)\n\n\n    const handleFirstNameChange = (e) => {\n        setFirstName(e.target.value)\n    }\n    const handleLastNameChange = (e) => {\n        setLastName(e.target.value)\n    }\n    const handlePhoneChange = (e) => {\n        setPhone(e.target.value)\n    }\n\n    const handleSubmit = async (e) => {\n\n        if (!ctx.loggedIn) {\n            // setShow(true);\n            setResponse(\"You have to be logged in!\")\n            return;\n        }\n        e.preventDefault();\n        const body = {\n            name: `${firstName} ${lastName}`,\n            phone,\n            hostid: data.hostid,\n            roomId: data.roomId,\n            userEmail: ctx.userData.email\n        }\n        const res = await ctx.submitBooking(body);\n        if (res && res.status === \"Successful\") setShowModal(true);\n        else setResponse(res.message)\n        setTimeout(() => setResponse(\"\"), 2000)\n\n    }\n    const iconClick = (id) => {\n        setState(!state);\n        ctx.handleFavorites(id)\n    }\n    const { roomId } = useParams() as {\n        roomId: string\n    }\n    const toggle = () => {\n        setShowModal(!showModal);\n        window.location.reload();\n        return false\n    }\n\n    console.log(roomId, ctx.userData)\n    useEffect(() => {\n        const room = ctx.roomsData.find(room => +room.roomId === +roomId);\n        if (room) setData(room)\n        console.log(roomId, \"data is\", data)\n    }, [ctx.roomsData, data, roomId])\n    return (\n        <div className={styles.Main}>\n            <div className={styles.Content}>\n                <Carousel interval={2000} indicators={false}>\n                    {data.imageUrl && data.imageUrl.length > 0 && data.imageUrl.map(url => <Carousel.Item>\n                        <img\n                            className=\"d-block w-100\"\n                            src={url}\n                            alt=\"\"\n                        />\n                    </Carousel.Item>)\n                    }\n                </Carousel>\n                <h2>{data.title} {ctx.favorites && ctx.favorites.includes(data.roomId) ? <FcLike onClick={() => iconClick(data.roomId)} /> : <FcLikePlaceholder onClick={() => iconClick(data.roomId)} style={{ \"fontSize\": \"1.5rem\" }} />}</h2>\n                {/* <div className={styles.likeIcon}><FcLikePlaceholder /></div> */}\n                <div className={styles.info}>\n                    <p>\n                        {data.location}\n                    </p>\n                    <span>\n                        <p>{data.price}</p>\n                        {data.booked ? <span style={{ \"color\": \"red\" }}>Not available</span> : \"Available\"}\n                    </span>\n                </div>\n                <p className={styles.desc}>{data.description}</p>\n                <p className={styles.fts}>{data.features}</p>\n            </div>\n            <div className={styles.Form}>\n                <h5>\n                    Let your host meet you\n                </h5>\n                <Form noValidate >\n                    <Form.Group controlId=\"exampleForm.ControlInput1\">\n                        <Form.Control required type=\"text\" onChange={handleFirstNameChange} value={firstName} placeholder=\"First Name\" />\n                    </Form.Group>\n                    <Form.Group controlId=\"exampleForm.ControlInput1\">\n                        <Form.Control required type=\"text\" onChange={handleLastNameChange} value={lastName} placeholder=\"Last Name\" />\n                    </Form.Group>\n                    <Form.Group controlId=\"exampleForm.ControlInput1\">\n                        <Form.Control onChange={handlePhoneChange} value={phone} required type=\"tel\" placeholder=\"Phone\" />\n                    </Form.Group>\n                    <Button onClick={handleSubmit} disabled={data.booked || firstName === \"\" || lastName === \"\" || phone === \"\"} type=\"submit\" variant=\"dark\" block>\n                        {ctx.loading ? \"Booking...\" : data.booked ? \"Booked\" : \"Book Now\"}\n                    </Button>\n                    {response !== undefined && <h5 style={{ \"textAlign\": \"center\", \"color\": \"red\" }}>{response}</h5>}\n                    <Modal title={\"Booking Successful\"} toggle={toggle} show={showModal}>\n                        <h5 style={{ \"letterSpacing\": \"1px\", \"textAlign\": \"center\", \"lineHeight\": \"1.7\" }}>{data.title} has been booked successfully! Your host will reach out to you shortly</h5>\n                    </Modal>\n                    {/* {props.success ? <div className=\"success-prompt\">Message sent successfully!</div> : null} */}\n                </Form>\n            </div>\n        </div >\n    )\n}\n\nexport default RoomDetails\n"]},"metadata":{},"sourceType":"module"}